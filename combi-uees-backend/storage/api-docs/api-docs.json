{
    "openapi": "3.0.0",
    "info": {
        "title": "COMBI UEES con Laravel 12",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/"
        }
    ],
    "paths": {
        "/api/anuncio": {
            "get": {
                "tags": [
                    "Anuncios"
                ],
                "summary": "Obtener el anuncio con sus comentarios",
                "operationId": "3c8f60ea8d37b149f122540ea4a6246c",
                "responses": {
                    "200": {
                        "description": "Anuncio con sus comentarios"
                    }
                }
            }
        },
        "/api/anuncios/{anuncio}": {
            "put": {
                "tags": [
                    "Anuncios"
                ],
                "summary": "Actualizar la URL de la foto del anuncio",
                "operationId": "93c86ed4353d8363bca3f88d99ee97c4",
                "parameters": [
                    {
                        "name": "anuncio",
                        "in": "path",
                        "description": "ID del anuncio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "anuncioURLFoto"
                                ],
                                "properties": {
                                    "anuncioURLFoto": {
                                        "type": "string",
                                        "format": "url"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Anuncio actualizado exitosamente"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Iniciar sesión",
                "operationId": "9b0a33bc495a2fd7237489b5849dd288",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso"
                    },
                    "400": {
                        "description": "Error de validación"
                    },
                    "401": {
                        "description": "Credenciales incorrectas"
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Cerrar sesión",
                "operationId": "1458b196d7947a5a601ca36981690dc5",
                "responses": {
                    "200": {
                        "description": "Sesión cerrada exitosamente"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/anuncios/{anuncio}/comentarios": {
            "get": {
                "tags": [
                    "Comentarios"
                ],
                "summary": "Listar comentarios de un anuncio",
                "operationId": "470792416a2bf9ac55c1e0ceb40ce107",
                "parameters": [
                    {
                        "name": "anuncio",
                        "in": "path",
                        "description": "ID del anuncio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de comentarios"
                    }
                }
            },
            "post": {
                "tags": [
                    "Comentarios"
                ],
                "summary": "Crear un comentario en un anuncio",
                "operationId": "f91129b8389ffc930343fd8370b64ebc",
                "parameters": [
                    {
                        "name": "anuncio",
                        "in": "path",
                        "description": "ID del anuncio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nombreUsuario",
                                    "comentarioTitulo",
                                    "comentarioDescripción"
                                ],
                                "properties": {
                                    "nombreUsuario": {
                                        "type": "string",
                                        "maxLength": 100
                                    },
                                    "comentarioTitulo": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "comentarioDescripción": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Comentario registrado exitosamente"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            }
        },
        "/api/rutas/{ruta}/horarios": {
            "get": {
                "tags": [
                    "Horarios"
                ],
                "summary": "Obtener todos los horarios de una ruta específica",
                "operationId": "445e42400ad0066037deada60d9fdac4",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "ID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de horarios",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Horario"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Horarios"
                ],
                "summary": "Crear un nuevo horario para una ruta",
                "operationId": "dd30a4d5480ec185b0d0c0a081399b4d",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "ID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "horaSalida"
                                ],
                                "properties": {
                                    "horaSalida": {
                                        "type": "string",
                                        "format": "time",
                                        "example": "14:30:00"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Hora creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Horario"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            }
        },
        "/api/rutas/{ruta}/horarios/{horario}": {
            "delete": {
                "tags": [
                    "Horarios"
                ],
                "summary": "Eliminar una hora por su ID",
                "operationId": "cf847ea1d2a73eeadbc20db63d3cc437",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la hora a eliminar",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Hora eliminada exitosamente"
                    },
                    "404": {
                        "description": "Hora no encontrada"
                    }
                }
            }
        },
        "/api/rutas": {
            "get": {
                "tags": [
                    "Rutas"
                ],
                "summary": "Obtener todas las rutas con sus relaciones",
                "operationId": "07f8f66135da1afc0dbdded354b14e48",
                "responses": {
                    "200": {
                        "description": "Lista de rutas completas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Ruta"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Rutas"
                ],
                "summary": "Crear una nueva ruta",
                "operationId": "7ae787bdba22d5f0225ce1875bc8f0d8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "rutaNombre",
                                    "rutaLatitud",
                                    "rutaLongitud"
                                ],
                                "properties": {
                                    "rutaNombre": {
                                        "type": "string",
                                        "maxLength": 30,
                                        "example": "Ruta Norte"
                                    },
                                    "rutaLatitud": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -2.1458
                                    },
                                    "rutaLongitud": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -79.9675
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Ruta creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Ruta"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            }
        },
        "/api/rutas/{ruta}": {
            "put": {
                "tags": [
                    "Rutas"
                ],
                "summary": "Actualizar una ruta existente",
                "operationId": "0135e1f85d528d0037e8d135e8ce00b3",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "ID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "rutaNombre",
                                    "rutaLatitud",
                                    "rutaLongitud"
                                ],
                                "properties": {
                                    "rutaNombre": {
                                        "type": "string",
                                        "maxLength": 30,
                                        "example": "Ruta Norte Actualizada"
                                    },
                                    "rutaLatitud": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -2.146
                                    },
                                    "rutaLongitud": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -79.968
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ruta actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Ruta"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Rutas"
                ],
                "summary": "Eliminar una ruta",
                "operationId": "01a00369de29f2118c46d5ea3e099c59",
                "parameters": [
                    {
                        "name": "ruta",
                        "in": "path",
                        "description": "ID de la ruta",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ruta eliminada exitosamente"
                    },
                    "404": {
                        "description": "Ruta no encontrada"
                    }
                }
            }
        },
        "/api/users": {
            "get": {
                "tags": [
                    "Motoristas"
                ],
                "summary": "Obtener lista de motoristas",
                "operationId": "c457726701591d1183b53aa71fc13441",
                "parameters": [
                    {
                        "name": "paginated",
                        "in": "query",
                        "description": "1 para paginar, 0 para obtener toda la lista",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de motoristas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Motorista"
                                            }
                                        },
                                        {
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Motoristas"
                ],
                "summary": "Registrar un nuevo motorista",
                "operationId": "592819a0265360b2014512d6dbfaf0e7",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password",
                                    "motoristaURLFotoDePerfil",
                                    "motoristaEstado",
                                    "motoristaUbicación",
                                    "IDRuta"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Carlos López"
                                    },
                                    "email": {
                                        "type": "string",
                                        "example": "motorista@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "contra123"
                                    },
                                    "motoristaURLFotoDePerfil": {
                                        "type": "string",
                                        "example": "https://cloudinary.com/foto.jpg"
                                    },
                                    "motoristaEstado": {
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "motoristaUbicación": {
                                        "type": "string",
                                        "example": "UEES"
                                    },
                                    "IDRuta": {
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Motorista creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Motorista"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            }
        },
        "/api/users/{user}": {
            "get": {
                "tags": [
                    "Motoristas"
                ],
                "summary": "Obtener detalles de un motorista",
                "operationId": "d3a14968f8b7a072620c75c7c78ed6f8",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID del motorista",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del motorista",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Motorista"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado"
                    }
                }
            },
            "put": {
                "tags": [
                    "Motoristas"
                ],
                "summary": "Actualizar un motorista",
                "operationId": "e29fc231c7937ab09483d35e6e3d1214",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID del motorista",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "motoristaURLFotoDePerfil": {
                                        "type": "string"
                                    },
                                    "motoristaEstado": {
                                        "type": "boolean"
                                    },
                                    "motoristaUbicación": {
                                        "type": "string"
                                    },
                                    "IDRuta": {
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Motorista actualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Motorista"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Motoristas"
                ],
                "summary": "Eliminar un motorista",
                "operationId": "e0f9a385a1d6788b99e519bd98cf7239",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "ID del motorista",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Motorista eliminado exitosamente"
                    },
                    "403": {
                        "description": "No autorizado"
                    }
                }
            }
        },
        "/api/viajes": {
            "get": {
                "tags": [
                    "Viajes"
                ],
                "summary": "Obtener todos los viajes",
                "operationId": "6c690df6789ce03f514b7f2693787e98",
                "parameters": [
                    {
                        "name": "paginated",
                        "in": "query",
                        "description": "1 para paginado, 0 para traer todos",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de viajes ordenados por fecha más reciente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Viaje"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Viajes"
                ],
                "summary": "Crear un nuevo viaje",
                "operationId": "aa3575ed8633a6fd102b7d066a0f1fef",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nombrePasajero",
                                    "viajeFecha",
                                    "viajeDestino",
                                    "IDRuta"
                                ],
                                "properties": {
                                    "nombrePasajero": {
                                        "type": "string",
                                        "example": "Juan Pérez"
                                    },
                                    "viajeFecha": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-01-15 14:30:00"
                                    },
                                    "viajeDestino": {
                                        "type": "string",
                                        "example": "Campus UEES"
                                    },
                                    "IDRuta": {
                                        "type": "integer",
                                        "example": 3
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Viaje creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Viaje"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            }
        },
        "/api/viajes/{viaje}": {
            "put": {
                "tags": [
                    "Viajes"
                ],
                "summary": "Actualizar un viaje existente",
                "operationId": "0af64335c113fc6b09c6c6053d37c109",
                "parameters": [
                    {
                        "name": "viaje",
                        "in": "path",
                        "description": "ID del viaje",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nombrePasajero",
                                    "viajeFecha",
                                    "viajeDestino",
                                    "IDRuta"
                                ],
                                "properties": {
                                    "nombrePasajero": {
                                        "type": "string",
                                        "example": "Juan Pérez"
                                    },
                                    "viajeFecha": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-01-15 14:30:00"
                                    },
                                    "viajeDestino": {
                                        "type": "string",
                                        "example": "Campus UEES"
                                    },
                                    "IDRuta": {
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Viaje actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Viaje"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Viaje no encontrado"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Viajes"
                ],
                "summary": "Eliminar un viaje",
                "operationId": "5eb01c502df35ce1423a5e9ad0b0781e",
                "parameters": [
                    {
                        "name": "viaje",
                        "in": "path",
                        "description": "ID del viaje",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Viaje eliminado exitosamente"
                    },
                    "404": {
                        "description": "Viaje no encontrado"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Horario": {
                "title": "Horario",
                "required": [
                    "id",
                    "inicio",
                    "fin"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "IDRuta": {
                        "type": "integer"
                    },
                    "horaSalida": {
                        "type": "string",
                        "format": "time"
                    }
                },
                "type": "object"
            },
            "Ruta": {
                "title": "Ruta",
                "description": "Información de una ruta de transporte",
                "required": [
                    "rutaID",
                    "rutaNombre",
                    "rutaLatitud",
                    "rutaLongitud",
                    "rutaBusesDisponibles",
                    "rutaBusesTotales"
                ],
                "properties": {
                    "rutaID": {
                        "type": "integer",
                        "example": 1
                    },
                    "rutaNombre": {
                        "type": "string",
                        "maxLength": 30,
                        "example": "Ruta Norte"
                    },
                    "rutaLatitud": {
                        "type": "number",
                        "format": "float",
                        "example": -2.1458
                    },
                    "rutaLongitud": {
                        "type": "number",
                        "format": "float",
                        "example": -79.9675
                    },
                    "rutaBusesDisponibles": {
                        "type": "integer",
                        "example": 2
                    },
                    "rutaBusesTotales": {
                        "type": "integer",
                        "example": 5
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-07-26T15:40:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-07-26T15:45:00Z"
                    },
                    "motoristasUEES": {
                        "type": "integer",
                        "example": 5
                    },
                    "motoristasRuta": {
                        "type": "integer",
                        "example": 3
                    }
                },
                "type": "object"
            },
            "Motorista": {
                "title": "Motorista",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 10
                    },
                    "name": {
                        "type": "string",
                        "example": "Carlos López"
                    },
                    "email": {
                        "type": "string",
                        "example": "motorista@example.com"
                    },
                    "motoristaURLFotoDePerfil": {
                        "type": "string",
                        "example": "https://ejemplo.com/foto.jpg"
                    },
                    "motoristaEstado": {
                        "type": "boolean",
                        "example": true
                    },
                    "motoristaUbicación": {
                        "type": "string",
                        "example": "UEES"
                    },
                    "IDRuta": {
                        "type": "integer",
                        "example": 3
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "Viaje": {
                "title": "Viaje",
                "description": "Información de un viaje asignado a una ruta",
                "required": [
                    "ViajeID",
                    "nombrePasajero",
                    "viajeFecha",
                    "viajeDestino",
                    "viajeEstado",
                    "IDRuta"
                ],
                "properties": {
                    "ViajeID": {
                        "type": "integer",
                        "example": 1
                    },
                    "nombrePasajero": {
                        "type": "string",
                        "example": "Juan Pérez"
                    },
                    "viajeFecha": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-08-01 14:30:00"
                    },
                    "viajeDestino": {
                        "type": "string",
                        "example": "UEES"
                    },
                    "viajeEstado": {
                        "type": "boolean",
                        "example": true
                    },
                    "IDRuta": {
                        "type": "integer",
                        "example": 2
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Anuncios",
            "description": "Gestión de anuncios"
        },
        {
            "name": "Autenticación",
            "description": "Login y logout de usuarios"
        },
        {
            "name": "Comentarios",
            "description": "Operaciones relacionadas con comentarios en anuncios"
        },
        {
            "name": "Horarios",
            "description": "Horarios"
        },
        {
            "name": "Rutas",
            "description": "Rutas"
        },
        {
            "name": "Motoristas",
            "description": "Motoristas"
        },
        {
            "name": "Viajes",
            "description": "Viajes"
        }
    ]
}